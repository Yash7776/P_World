{% load static %}
{% include 'customer/header.html' %}
<style>
	/* Force dark background immediately */
	body, html {
		background-color: #1a1a1a !important;
		color: #f7f7f7 !important;
	}

	.main-content {
		background-color: #1a1a1a;
		min-height: 100vh;
		padding-bottom: 80px;
	}

	.card {
		background-color: #2c2c2c !important;
		border: 1px solid #5e5e5e;
		color: #f7f7f7;
		padding: 30px;
		padding-bottom: 30px;
		border-radius: 8px;
		position: relative;
	}

	/* Headings */
	h3 {
		color: #f7f7f7 !important;
		margin-bottom: 15px;
		text-align: left;
	}

	p {
		color: #d5d5d5;
		text-align: left;
		margin-bottom: 30px;
	}

	/* Form inputs dark theme */
	.form-control {
		background-color: #3a3a3a !important;
		border: 1px solid #5e5e5e !important;
		color: #f7f7f7 !important;
		padding: 12px;
		font-size: 16px;
		border-radius: 5px;
	}

	.form-control:focus {
		background-color: #444444 !important;
		border-color: #d9534f !important;
		color: #f7f7f7 !important;
		box-shadow: 0 0 0 0.2rem rgba(217, 83, 79, 0.25);
		outline: none;
	}

	.form-control::placeholder {
		color: #bbb6b6 !important;
	}

	/* Error/Success messages */
	span[id^="errmsg"] {
		color: #ff6b6b;
		font-size: 14px;
		display: block;
		margin-top: 5px;
		text-align: left;
	}

	/* Buttons */
	.login-btn {
		background-color: #d9534f;
		border: none;
		color: white;
		padding: 12px 30px;
		font-size: 16px;
		font-weight: bold;
		border-radius: 5px;
		cursor: pointer;
		transition: background-color 0.3s;
		width: 100%;
	}

	.login-btn:hover {
		background-color: #c9302c;
	}

	/* Back button styling - circular */
	.back-btn {
		position: absolute;
		top: 8px;
		right: 0;
		background-color: #d9534f;
		border: none;
		color: white;
		width: 45px;
		height: 45px;
		border-radius: 50%;
		cursor: pointer;
		transition: background-color 0.3s;
		z-index: 10;
		display: flex;
		align-items: center;
		justify-content: center;
	}

	.back-btn:hover {
		background-color: #c9302c;
	}

	.back-btn i {
		font-size: 18px;
	}

	/* Back to login link */
	.back-to-login {
		text-align: right;
		margin-top: 20px;
		display: none;
	}

	.back-to-login a {
		color: #d9534f;
		text-decoration: none;
		font-size: 16px;
		font-weight: 600;
	}

	.back-to-login a:hover {
		color: #c9302c;
		text-decoration: underline;
	}

	/* Form section spacing */
	.form-section {
		margin-bottom: 10px;
	}

	/* Responsive adjustments */
	@media (max-width: 768px) {
		.card {
			padding: 25px 20px;
		}
		
		.back-btn {
			top: 8px;
			right: 0;
			width: 40px;
			height: 40px;
		}
		
		.back-btn i {
			font-size: 16px;
		}
	}
</style>

<!-- Start main-content -->
<div class="main-content">
	<div class='container' style='margin-top: 1.5rem;'>
		<div class='row'>
			<div class='col-md-3'></div>
			<div class='col-md-6' style="position: relative;"> 
				<h3>Forgot Password</h3>
				<p>Please enter registered email here, the password will be sent to your email.</p>
				
				<!-- Back Button - Circular -->
				<button class="back-btn" onclick="window.location.href='/login/';" title="Go Back">
					<i class="fa fa-arrow-left" aria-hidden="true"></i>
				</button>
				
				<div class='card shadow'>
					<div class="form-section">
						<input type="email" class="form-control" id="email" required name="email" placeholder="Email Address*">
						<span id="errmsg1"></span>
					</div>
					
					<button class="login-btn nextBtn btn-danger btn-lg" onclick="forgotPwd()">FORGOT PASSWORD</button>
				</div> 
			</div>
			<div class='col-md-3'></div>
		</div> 
	</div>
</div>
<!-- end main-content -->

<script>
	$('#email').keyup(function(){
		$('#errmsg1').hide();
	});
	
	function forgotPwd(){
		var email = document.getElementById('email').value; 
		var errmsg1 = document.getElementById('errmsg1');
		
		if(email == ""){
			errmsg1.innerHTML = "Please Enter Email Address";
			$('#errmsg1').css('color', '#ff6b6b');
			$('#errmsg1').show();
		}
		else if(!(/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(email))) {
			errmsg1.innerHTML = "Invalid Email Address...";
			$('#errmsg1').css('color', '#ff6b6b');
			$('#errmsg1').show();
		}
		else {
			$.ajax({
				method: "POST",
				url: "/forgot_password_api/",
				headers: {'X-CSRFToken': getCookie('csrftoken')},
				data: {
					"email": email,  
				},
				success: function(response){
					if(response.status == 200){
						errmsg1.innerHTML = response.msg;  
						$('#errmsg1').css('color', '#4caf50');
						$('#errmsg1').show();
					}
					else {
						errmsg1.innerHTML = response.msg;  
						$('#errmsg1').css('color', '#ff6b6b');
						$('#errmsg1').show();
					}
				}  
			});
		}
	} 
</script>

{% include 'customer/footer.html' %}