{% load static %}
{% include 'customer/header.html' %}
 <style>
  
.main-content {
    min-height: calc(100vh - 150px);
}
.swal-icon--success:after, .swal-icon--success:before {
 background: #262626 !important;
	 }
.swal-icon--success__hide-corners {
	background: #262626;
}


p{
color: #d5d5d5;
font-weight: bold;
}  
  
 
 </style>
  <!-- Start main-content -->
  <div class="main-content">
    <!-- Section: inner-header -->
      <div class='container text-center'>
			<div class="row" style="margin-top: 1rem;margin-bottom: 1rem;">
				<div class="col-lg-4" ></div>
					<div class="col-lg-4" >
					{% if item_obj %}
						<h3 style="color:#fff;margin:0">All Items</h3>
					{% endif %}
					</div> 
				<div class="col-lg-3">
				    <button class="login-btn nextBtn btn-danger btn-sm mr-5" onclick="window.location.href='/add_item/'">Add Item </button>
					<button class="login-btn nextBtn btn-danger btn-sm" onclick="window.location.href='/store_dashboard/'"><i class="fa fa-arrow-left" aria-hidden="true" style="cursor:pointer;" data-toggle="tooltip" data-placement="top" title="Back" ></i></button>  
				</div>
			</div>
		<div class="row">
			<div class="col-md-3"></div>
			  <div class="col-md-6">
				<div class='card shadow text-center' > 
				{% if item_obj %} 
					<div class="reminder overflow-auto" id="reminder" style="overflow-x: hidden; max-height:600px !important;  overflow-y: auto; font-size:13.5px !important">
						{% for i in item_obj %}
								<div style='border: 3px solid #504e4e;box-shadow: 2px 2px 9px 0px grey; padding: 5px 0px 5px 0px;width: 98%;' > 
									<div class="row ">
										<div class="col-md-2" style="margin-left:4px;">
										  <img {% if i.item_image.url %} src="{{i.item_image.url}}" {% else %} src="/media/profile_image/no_image.jpg "  {% endif %} alt="" width="60" height="40" style="height:70px; width:80px;"/> 
										</div>
										<div class="col-md-6 text-left" style='margin-left:2rem;' >
											 <p style='margin-bottom:0;'>{{i.item_name}}</p> 
											 <p style='margin-bottom:0;margin-top: -5px;'>For : {{i.pet_type}}<p> 
											 <p style='margin-bottom:0;margin-top: -15px;line-height: normal;'>{{i.item_description}} <p> 
										</div>
										<div class="col-md-2 text-right">   
											<a href="/edit_item/{{i.id}}"><i class="fa fa-edit" aria-hidden="true" style="cursor:pointer;color:red;margin-right:0.5rem;" data-toggle="tooltip" data-placement="top" title="Edit" ></i> </a>
											
											 <i class="fa fa-trash" aria-hidden="true" onClick="deleteItem( {{i.id}} )" style="cursor:pointer;color:red;margin-right:1rem;" data-toggle="tooltip" data-placement="top" title="Delete" ></i> 
											
											<p style='margin-bottom:0;margin-top: 15px;margin-right: 5px;'>${{i.item_price|floatformat:2}}</p> 
											{% if i.available_status == True %}
											 <p style='margin-bottom:0;color:#128112;' > Available</p>	
                                            {% else %}		
											 <p style='margin-bottom:0;color:#dd1717;' > Not Available</p>	
											{% endif %}
										</div>
									</div> 
								</div>
								<br>
						{% endfor %}
					</div>
				{% else %}
					<div class="row" style="margin-top: 2%;">
						<h2>No Items Available.</h2>
						
					</div>
				{% endif %}
				
		    </div>
		  </div>
		</div>
		 
		   </div>
	  </div>
  </div>
  
	
			  
  <!-- end main-content -->
 <script>
	function deleteItem(item_id)
	{
		
		swal({
			title: "Delete Item.",
			text: "Do you want to delete this Item?",
			icon: "warning",
			buttons: ["No", "Yes"],
			html:true,
			className: "swal-back",
			closeOnClickOutside: false,
			dangerMode: true,			
		})		
		.then((willUpdate) => {
			if (willUpdate) {
				$.ajax({
					type:"POST",
					url: "/delete_store_item/",
					headers : {'X-CSRFToken' : getCookie('csrftoken')},
					data: {
						'id': item_id, 
					},
					success: function (response) 
					{
						if (response.status == 1){
							swal("Item Deleted Successfully.", {
								icon: "success",
								button: "Ok",
								closeOnClickOutside: false,
								
							})
							.then((addcat)=>{
						   if(addcat){
						    window.location.reload();
						   }
						});
							
						}
						else{
							swal(""+response.msg+"", {
							icon: "error",
							button: "Ok",
							closeOnClickOutside: false,
							});
						}
					}
					
				})
				
			}	
		});
	}
    
 
 </script>
  {% include 'customer/footer.html' %}